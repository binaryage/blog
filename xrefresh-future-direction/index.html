<!DOCTYPE html>
<html xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://developers.facebook.com/schema/" class="/xrefresh-future-direction">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
    <title>Future direction of XRefresh</title>
    <link rel="canonical" href="http://blog.binaryage.com/xrefresh-future-direction"/>
    <meta name="title" content="Future direction of XRefresh"/>
    <meta name="description" content="Sharing ideas about software, products and cool stuff from BinaryAge"/>
    <meta name="keywords" content="blog,ideas,antonin hildebrand,binaryage,productivity,software,web,development"/>
    <link rel="image_src" href="http://www.binaryage.com/shared/img/icons/binaryage-badge-256.png"/>
    <meta name="google-site-verification" content="N_xzdr6ymSUQFhAEvQg7f-sp1JAeJCdW2JuaRg-da0w"/>
    <meta property="fb:admins" content="antonin.hildebrand"/>
    <link href="http://feeds.feedburner.com/binaryage-blog" type="application/atom+xml" rel="alternate" title="Ideas from BinaryAge"/>
    <link rel="shortcut icon" href="http://static.binaryage.com/5604bda0_favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="http://static.binaryage.com/5604bda0_favicon.ico" type="image/x-icon"/>
    <script type="text/javascript" charset="utf-8">
      // give the custom font some time to load, otherwise enable simple font visibility
      setTimeout(function(){$("html").addClass("wf-fake-active")},2e3)
    </script>
    <style type="text/css">
      .js .wf{opacity:0!important;filter:alpha(opacity=0)!important;-webkit-transition:opacity .5s ease 0s;-moz-transition:opacity .5s ease 0s;-o-transition:opacity .5s ease 0s;transition:opacity .5s ease 0s;font-smoothing:antialiased;-webkit-font-smoothing:antialiased}.wf-active .wf,.wf-fake-active .wf{opacity:1!important;filter:alpha(opacity=100)!important}
    </style>
    <link rel="stylesheet" href="http://static.binaryage.com/c89c12d7_shared_css_site.css" type="text/css"/>
    <script type="text/javascript" charset="utf-8">
      /*
      CSS Browser Selector v0.4.0 (Nov 02, 2010)
      Rafael Lima (http://rafael.adm.br)
      http://rafael.adm.br/css_browser_selector
      License: http://creativecommons.org/licenses/by/2.5/
      Contributors: http://rafael.adm.br/css_browser_selector#contributors
      */
      function css_browser_selector(e){var t=e.toLowerCase(),n=function(e){return t.indexOf(e)>-1},r="gecko",i="webkit",s="safari",o="opera",u="mobile",a=document.documentElement,f=[!/opera|webtv/i.test(t)&&/msie\s(\d)/.test(t)?"ie ie"+RegExp.$1:n("firefox/2")?r+" ff2":n("firefox/3.5")?r+" ff3 ff3_5":n("firefox/3.6")?r+" ff3 ff3_6":n("firefox/3")?r+" ff3":n("gecko/")?r:n("opera")?o+(/version\/(\d+)/.test(t)?" "+o+RegExp.$1:/opera(\s|\/)(\d+)/.test(t)?" "+o+RegExp.$2:""):n("konqueror")?"konqueror":n("blackberry")?u+" blackberry":n("android")?u+" android":n("chrome")?i+" chrome":n("iron")?i+" iron":n("applewebkit/")?i+" "+s+(/version\/(\d+)/.test(t)?" "+s+RegExp.$1:""):n("mozilla/")?r:"",n("j2me")?u+" j2me":n("iphone")?u+" iphone":n("ipod")?u+" ipod":n("ipad")?u+" ipad":n("mac")?"mac":n("darwin")?"mac":n("webtv")?"webtv":n("win")?"win"+(n("windows nt 6.0")?" vista":""):n("freebsd")?"freebsd":n("x11")||n("linux")?"linux":"","js"];c=f.join(" ");a.className+=" "+c;return c}css_browser_selector(navigator.userAgent)
    </script>
    <script type="text/javascript" charset="utf-8">
      if(!window.console){window.console={};function fn(){opera.postError(arguments)}["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"].forEach(function(o){window.console[o]=fn})}!function(){var o=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];if(!window.console){window.console={}}for(var n in o){window.console[o[n]]=window.console[o[n]]||function(){return}}}()
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8">
      // https://github.com/carhartl/jquery-cookie
      function bacookie(e,t,n){if(arguments.length>1&&String(t)!=="[object Object]"){n=n||{};if(t===null||t===undefined){n.expires=-1}if(typeof n.expires==="number"){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}t=String(t);return document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var s,o=n.raw?function(e){return e}:decodeURIComponent;return(s=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)")).exec(document.cookie))?o(s[1]):null}
    </script>
    <script type="text/javascript" charset="utf-8">
      function parseUri(r){var e=parseUri.options,o=e.parser[e.strictMode?"strict":"loose"].exec(r),s={},t=14;while(t--)s[e.key[t]]=o[t]||"";s[e.q.name]={};s[e.key[12]].replace(e.q.parser,function(r,o,t){if(o)s[e.q.name][o]=t});return s}parseUri.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}}
    </script>
    <script type="text/javascript">
      WebFontConfig={google:{families:["Play:regular,bold"]}};!function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";t.type="text/javascript";t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()
    </script>
    <script src="http://static.binaryage.com/c0e8173f_shared_js_code.js"></script>
    <script type="text/javascript">
      var _gaq=_gaq||[]
    </script>
    <script type="text/javascript">
      _gaq.push(["_setAccount","UA-8404259-1"]);_gaq.push(["_addIgnoredRef",".binaryage.com"]);_gaq.push(["_setDomainName",".binaryage.com"]);_gaq.push(["_setAllowLinker",true]);_gaq.push(["_setAllowHash",false]);_gaq.push(["_trackPageview"]);!function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()
    </script>
  </head>
  <body id="page-blog-xrefresh-future-direction">
    <div id="topbar">
      <div class="container topbar">
        <div class="topbar-buttons">
          <div class="topbar-labs wf">
            labs
          </div>
          <div class="topbar-testimonials wf">
            testimonials
          </div>
        </div>
      </div>
    </div>
    <div id="header" class="menu-blog">
      <div class="container header">
        <a href="http://www.binaryage.com" title="BinaryAge Software">
          <div class="header-logo">
            <div class="header-logo-hover"></div>
          </div>
        </a>
        <div class="header-motto arrow"></div>
        <div class="header-selector"></div>
        <ul class="header-menu">
          <li class="menu-item-store wf"><a href="http://www.binaryage.com/store"><span>store</span></a></li>
          <li class="menu-item-products wf"><a href="http://www.binaryage.com"><span>products</span></a></li>
          <li class="menu-item-blog wf"><a href="http://blog.binaryage.com"><span>blog</span></a></li>
          <li class="menu-item-hints wf"><a href="http://hints.binaryage.com"><span>hints</span></a></li>
          <li class="menu-item-support wf"><a href="http://discuss.binaryage.com"><span>support</span></a></li>
        </ul>
      </div>
    </div>
    <div id="main">
      <div class="wf">
        <div id="blog">
          <div class="container">
            <div class="blog-body">
              <div class="blog-content">
                <div class="blog-articles">
                  <a href="/">« Read more articles</a>
                </div>
                <div id="post">
                  <div class="post-titlebar">
                    <div class="calendar">
                      <div class="month">Nov</div>
                      <div class="day">15</div>
                      <div class="year">2009</div>
                    </div>
                    <h1 class="post-title">Future direction of XRefresh</h1>
                    <div class="clear"></div>
                  </div>
                  <div class="post-content"><p><img src="http://static.binaryage.com/317ba4d5_shared_img_icons_xrefresh-64.png" class="intro-icon"/></p>
                    <p><strong><a href="http://xrefresh.binaryage.com">XRefresh</a> is a simple tool which is able to refresh a web page in the browser in reaction to a file modification.</strong></p>
                    <h4>Here is the problem</h4>
                    <blockquote><p>I want to prototype HTML and CSS changes on live page (Firebug), but I don't want to manually sync the changes back to my original sources.</p></blockquote>
                    <p>XRefresh is especially useful on dual monitor system. You can stay in your favorite editor and as you type it will preview the page automatically on a secondary monitor in open browser window.</p>
                    <h4>The implementation</h4>
                    <p>XRefresh is implemented as a browser extension and a filesystem monitor. These two components talk to each other using TCP connection. Whenever something changes, the monitor notifies the extension which then instructs the browser to do a full refresh of the page.</p>
                    <p>This solution has some advantages:</p>
                    <ul>
                      <li>it is independent of the text editor or IDE you are using for web development</li>
                      <li>is is independent of the server-side stack (you can run locally any server technology you want)</li>
                      <li>it is possible to use XRefresh over a network (in case you are editing files on a remote box)</li>
                    </ul>
                    <p>Full page refresh is a robust solution and works pretty well for simple static pages, but it has one big drawback for dynamic pages. After refresh you usually lose state of the web application. Let's say you have AJAX application, which has some dynamic UI. Say, a HTML dialog opened after clicking on a button. For prototyping such an UI you have to first click through application to get into the required state. But XRefresh does a full refresh which forces you to this again and again after every tiny change to a file. This destroys the original productivity workflow. As I was doing more and more complex pages I was thinking how to solve this problem...</p>
                    <p>The first idea was to use some kind of macro recorder and replay user actions after every refresh automatically. This seemed as a pretty general solution in theory but didn't work in reality. In Firefox I tried to implement simple listener for user events like mouse clicks and key strokes and then tried to replay them on top of new page. This approach had terrible timing issues and also failed because not all events were 100% reproducible. Some products like iMacros, Selenium or other tools are trying to implement something like that. Maybe they have found some way how to do it well, but from this experience I doubt it is a robust solution in more complex cases.</p>
                    <p>The second idea was to solve this just for CSS prototyping. In case the page uses externally linked CSS files, it is easily possible to refresh just external CSS file and let browser do the hard work of updating styles without full refresh. This worked surprisingly well. With TextMate on OSX I was able to get to a Firebug-like CSS prototyping experience. The only drawback is that it puts constraints on XRefresh user: it works only for CSS, you have to reference CSS files externally, no CSS dependencies via @import and you have to keep to a simple URL mapping schema (I'm using fuzzy filename&lt;-&gt;url matcher to decide what CSS references to update).</p>
                    <h4>But what about live HTML update?</h4>
                    <p>This is still an open problem and much harder. I'm thinking about a solution for this. It is not robust but I believe it should be useful for 99% of cases (at least when user learns safe editing patterns).</p>
                    <p>The idea is to have some kind of smart diff algorithm. Whenever file changes don't do a full refresh, but instead reload just affected HTML file into the browser in the background. Because we know the original HTML source and the new HTML source we can do a diff of these. This way we can identify modified chunks. With the knowledge of HTML parsing we can extend these chunks into some kind of "address plus modification descriptor". Address can be selector, xpath or something like anchoring regexp. Modification is something like "replace aaa with bbb" or "insert xxx after yyy" or even "set innerHTML of addressed node" in case the change went across HTML node boundaries. In javascript we can then implement updater function which is able to consume these patches and apply them to live DOM.</p>
                    <p>Of course, this is far from a robust solution. But we don't need a robust one, we need <strong>good enough solution</strong>(tm). Smart diff encoding which maps well on DOM is one important task. The other difficult problem is having these changes not interfere with dynamic page functionality. As you can see obvious complication is event handlers attached to existing DOM nodes. Less obvious is javascript expando properties on DOM nodes: with replacing whole DOM subtrees we are going to lose them. But this may be not as bad as it seems. The updater can be smart enough to reuse existing nodes whenever possible. Or Firefox 3.6 has a new API for iterating event handlers on nodes. Theoretically we can collect important expando javascript properties and event handlers and re-apply them on new nodes. Yeah, sounds like a lot of troubles and there are probably more problems I quite don't see right now. But the problem is really challenging (at least for me).</p>
                    <p>I'm thinking about a proof-of-concept project where we can test this idea.</p>
                    <h4>The idea</h4>
                    <p><strong>Create a web-based editor for HTML and CSS with live-update feature</strong></p>
                    <ul>
                      <li>Create a bookmarklet which enables user to inject 'updater.js' javascript file into any HTML page.</li>
                      <li>Implement updater.js
                        <ul>
                          <li>it opens a new browser window and embeds there Bespin code editor (they released standalone embeddable version a few days ago), put parent page's HTML in there</li>
                          <li>it implements protocol for incrementally changing live page by accepting and applying
                            <ul>
                              <li>CSS "patches"</li>
                              <li>HTML "patches"</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                      <li>In the code window implement watcher.js, which watches changes in the code editor, continuously making diffs and translating them into a series of patches (if applicable)</li>
                      <li>Implement simple communication channel between parent window and code window (as simple as window.opener.update(jsonMessage) ).
                      Wire watcher.js to send messages to updater.js.</li>
                    </ul>
                    <h4>The challenging parts:</h4>
                    <ul>
                      <li>design protocol for communication between watcher and updater</li>
                      <li>implement smart diff analyzer or maybe full HTML/CSS parser on watcher side</li>
                      <li>implement efficient updater (use DOM APIs for incrementally updating HTML and CSS or some suitable library)</li>
                    </ul>
                    <h4>Keep in mind:</h4>
                    <ul>
                      <li>by "patches" I don't necessarily mean unified patches but rather
                        high-level JSON descriptions of what to change (a good granularity for
                        CSS may be CSS-rules level, for HTML minimal enclosing innerHTML-like
                      snippets addressed by XPaths or CSS selectors?)</li>
                      <li>updater.js should be as simple as possible and not pollute global
                        namespace (imagine inclusion into really messy pages), patching
                        intelligence should be shifted more towards watcher.js side (imagine
                      watcher implementation server-side)</li>
                      <li>the protocol should possibly work well over the network</li>
                    </ul>
                    <h4>Possible applications I see right now:</h4>
                    <ul>
                      <li>the next version of XRefresh of course :-)</li>
                      <li>web-based HTML code editors (there are plenty of them in the wild and to be honest I'm also working on one of them)</li>
                      <li>replacement for Firebug's feature for rewriting pieces of HTML or live Bespin-based CSS editor in Firebug</li>
                      <li>development tool for PhoneGap based mobile applications (watcher sends updates directly into running page in webkit in the iPhone simulator)</li>
                    </ul>
                    <h4>Is this viable?</h4>
                    <p>I'm not going to write such a thing right away. It definitely does not look like a weekend project. I'd like to validate this idea and ideally gather like-minded hackers to evaluate it. What do you think?</p>
                  </div>
                </div>
                <div class="simple_overlay" id="overlay-gallery" style="display:none">
                  <a class="overlay-prev">prev</a>
                  <a class="overlay-next">next</a>
                  <div class="overlay-info"></div>
                  <img class="overlay-progress" src="http://static.binaryage.com/32e8f83d_shared_img_twitter-loader.gif"/>
                </div>
                <script>
                  !function(){var e=$(".post-content");var a=$(".blog-image",e).add(".blog-image-full",e).add(".blog-image-border",e).add(".blog-image-full-border",e);if(!a.length)return;var r=[];a.each(function(){var e=$(this);var a=$("<a>").attr("href",e.attr("src"));var r=e.attr("title");if(r)a.attr("title",r);e.wrap(a)});a.parent().overlay({effect:"apple",expose:"#f1f1f1",target:"#overlay-gallery"}).gallery({disabledClass:"disabled-overlay",prev:".overlay-prev",next:".overlay-next",info:".overlay-info",progress:".overlay-progress",opacity:1,speed:200,template:"[${index}/${total}] ${title}"})}()
                </script>
                <div class="master-separator"></div>
                <div id="comments">
                  <div id="disqus_thread"></div>
                  <div id="disqus_script"></div>
                  <script type="text/javascript" charset="utf-8">
                    var disqus_url="http://blog.binaryage.com/xrefresh-future-direction/";$("#disqus_script").html(writeCapture.sanitize("<scr"+'ipt type="text/javascript" src="http://disqus.com/forums/binaryage/embed.js"></sc'+"ript>"))
                  </script>
                  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
              </div>
              <div class="blog-side">
                <div class="vseparator-top"></div>
                <div class="vseparator-body"></div>
                <div class="vseparator-bottom"></div>
                <div class="blog-side-box blog-side-about">
                  <div class="blog-side-about-left"><a href="http://www.binaryage.com/about"><img src="http://www.gravatar.com/avatar/79322c2ed80c2d722de8c9d0475198a0?s=76" width="76" height="76"/></a></div>
                  <div class="blog-side-about-right"><h4>About Antonin</h4>I'm a software developer passionate about the Mac, the web, 3d graphics and software tools.<br/><a href="http://www.binaryage.com/about.html">Read More »</a></div>
                  <div class="thats-me arrow"></div>
                </div>
                <div class="blog-side-box blog-side-follow">
                  <a href="http://twitter.com/binaryage" class="twitter-follow-button" data-show-count="true">Follow @binaryage</a>
                  <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
                </div>
                <div class="blog-side-box blog-side-subscribe">
                  <a href="http://feeds.feedburner.com/binaryage-blog" rel="alternate" type="application/rss+xml"><div class="blog-side-icon blog-rss-icon"></div></a>
                  <a href="http://feeds.feedburner.com/binaryage-blog" rel="alternate" type="application/rss+xml">Subscribe</a>
                  <div class="subscribe-button">
                    <a href="http://feeds.feedburner.com/binaryage-blog"><img src="http://feeds.feedburner.com/~fc/binaryage-blog?bg=dddddd&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt=""/></a>
                  </div>
                </div>
                <div class="blog-side-box blog-side-products">
                  <div class="blog-side-separator-top totalfinder"></div>
                  <div class="blog-side-product">
                    <a href="http://totalfinder.binaryage.com">
                      <img src="http://static.binaryage.com/57f6fb3b_shared_img_icons_totalfinder-64.png" width="38" height="38"/>
                      <div class="title">TotalFinder</div>
                      <div class="info">Adds tabs to your Finder.app!</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom totalfinder"></div>
                  <div class="blog-side-separator-top totalspaces"></div>
                  <div class="blog-side-product">
                    <a href="http://totalspaces.binaryage.com">
                      <img src="http://static.binaryage.com/52792a5d_shared_img_icons_totalspaces-64.png" width="38" height="38"/>
                      <div class="title">TotalSpaces</div>
                      <div class="info">The ultimate desktop manager</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom totalspaces"></div>
                  <div class="blog-side-separator-top totalterminal"></div>
                  <div class="blog-side-product">
                    <a href="http://totalterminal.binaryage.com">
                      <img src="http://static.binaryage.com/af5e5355_shared_img_icons_totalterminal-64.png" width="38" height="38"/>
                      <div class="title">TotalTerminal</div>
                      <div class="info">A Quake-style Terminal window</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom totalterminal"></div>
                  <div class="blog-side-separator-top firequery"></div>
                  <div class="blog-side-product">
                    <a href="http://firequery.binaryage.com">
                      <img src="http://static.binaryage.com/e506cf2d_shared_img_icons_firequery-64.png" width="38" height="38"/>
                      <div class="title">FireQuery</div>
                      <div class="info">jQuery development in Firebug</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom firequery"></div>
                  <div class="blog-side-separator-top firelogger"></div>
                  <div class="blog-side-product">
                    <a href="http://firelogger.binaryage.com">
                      <img src="http://static.binaryage.com/dff2e903_shared_img_icons_firelogger-64.png" width="38" height="38"/>
                      <div class="title">FireLogger</div>
                      <div class="info">Realtime logging into Firebug</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom firelogger"></div>
                  <div class="blog-side-separator-top firerainbow"></div>
                  <div class="blog-side-product">
                    <a href="http://firerainbow.binaryage.com">
                      <img src="http://static.binaryage.com/b424aa93_shared_img_icons_firerainbow-64.png" width="38" height="38"/>
                      <div class="title">FireRainbow</div>
                      <div class="info">A syntax highlighting for Firebug</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom firerainbow"></div>
                  <div class="blog-side-separator-top xrefresh"></div>
                  <div class="blog-side-product">
                    <a href="http://xrefresh.binaryage.com">
                      <img src="http://static.binaryage.com/317ba4d5_shared_img_icons_xrefresh-64.png" width="38" height="38"/>
                      <div class="title">XRefresh</div>
                      <div class="info">Reload your browsers after save</div>
                    </a>
                  </div>
                  <div class="blog-side-separator-bottom xrefresh"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div id="tweets-section">
      <div class="container" style="position: relative">
        <ol id="tweets" class="statuses"></ol>
      </div>
    </div>
    <div id="footer">
      <div class="container">
        <div class="footer-separator"></div>
        <div class="footerbox">
          <div class="copyright">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0"><img title="the website license" alt="Creative Commons License" style="border-width:0" src="http://static.binaryage.com/69a4ba35_shared_img_byccnd.png"/></a>
          </div>
          <div class="footer-links wf">
            <a href="http://www.binaryage.com/about.html">contact</a>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript" charset="utf-8">
      $(function(){var e;$(".topbar-testimonials").bind("click",function(){if(window.SSTracker){SSTracker.pushState("praise")}if(!e){$("#tweets").tweet({user:"binaryage"});e=true}})})
    </script>
    <script type="text/javascript" charset="utf-8">
      $(function(){setTimeout(function(){var e=location.hash.substring(1);if(e.substring(0,2)=="o-"){$("#"+e).trigger("click")}},500)})
    </script>
    <script type="text/javascript" charset="utf-8">
      $(function(){var a=document.location.host;if(a.substring(a.length-3)=="org"){$("a").each(function(){var a=$(this);var r=a.attr("href");if(r){if(r.match("binaryage.com")){r=r.replace("binaryage.com","binaryage.org")}var t=document.location+"";a.attr("href",r)}})}})
    </script>
    <script type="text/javascript" charset="utf-8">
      !function(){var r=parseUri(document.location+"");var e=r.queryKey["referrer"];if(e){bacookie("bareferrer",e,{path:"/",expires:14})}}();$("a").live("click",function(){var r=$(this).attr("href")+"";var e=bacookie("bareferrer");if(e){r+=(r.indexOf("?")==-1?"?":"&")+"referrer="+encodeURIComponent(e)}var a=document.location+"";if(a.match(/fastspring\.com/)&&r.match(/binaryage\.com/)||a.match(/binaryage\.com/)&&r.match(/fastspring\.com/)){_gaq.push(["_link",r]);return false}})
    </script>
    <script type="text/javascript">
      var _gauges=_gauges||[];(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.id="gauges-tracker";e.setAttribute("data-site-id","4f10d65d844d52139500000b");e.src="//secure.gaug.es/track.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()
    </script>
  </body>
</html>